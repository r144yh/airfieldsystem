(function(t){function e(e){for(var o,i,l=e[0],s=e[1],c=e[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},r=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/airfieldsystem/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"183d":function(t,e,a){"use strict";a("517a")},"37bd":function(t,e,a){"use strict";a("5acc")},"517a":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"HTTP",(function(){return Dt})),a.d(e,"bus",(function(){return _t}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header"),a("Home",{key:t.componentKey}),a("router-view",{key:t.componentKey})],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{toggleable:"lg",type:"dark"}},[a("b-navbar-toggle",{attrs:{target:"nav-collapse",variant:"dark"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("div",[a("router-link",{staticClass:"nav-link active",attrs:{"aria-current":"page",to:"/"}},[t._v("Главная страница")])],1),t.showLink||void 0===t.userLogin||null===t.userLogin?a("b-navbar-nav",{staticClass:"ml-auto"},[a("router-link",{staticClass:"nav-link justify-content-end",attrs:{to:""}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-signin",modifiers:{"modal-signin":!0}}],attrs:{pill:"",variant:"outline-primary",id:"signInBtn"}},[t._v("Вход")])],1),a("router-link",{staticClass:"nav-link justify-content-end",attrs:{to:""}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-signup",modifiers:{"modal-signup":!0}}],attrs:{pill:"",variant:"outline-dark"}},[t._v("Регистрация")])],1)],1):t._e(),!1===t.showLink&&null!==t.userLogin?a("b-navbar-nav",{staticClass:"ml-auto"},[a("div",{staticClass:"userInf"},[a("router-link",{staticClass:"nav-link active",attrs:{"aria-current":"page",to:"/"}},[t._v("Здравствуйте, "),a("strong",[t._v(t._s(t.userLogin))])])],1),a("router-link",{staticClass:"nav-link justify-content-end",attrs:{to:""}},[a("b-button",{attrs:{pill:"",variant:"outline-dark"},on:{click:t.resetUserLogin}},[t._v("Выйти")])],1)],1):t._e()],1)],1),a("b-modal",{attrs:{id:"modal-signin",centered:"",title:"Вход","hide-footer":!0}},[a("SignIn",{on:{sendResetShowOnPage:t.resetSignInFormOnPage}})],1),a("b-modal",{attrs:{id:"modal-signup",centered:"",title:"Регистрация","hide-footer":!0}},[a("SignUp",{on:{sendResetRegistrationOnPage:t.resetSignUpFormOnPage}})],1)],1)},l=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin-container"},[t.download?a("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):t._e(),t.show?a("b-form",{staticClass:"signin-container__form justify-content-center",on:{reset:t.onReset}},[a("b-form-group",{attrs:{id:"inputGroupSignIn1",label:"Логин:","label-for":"inputSignIn1",required:""}},[a("b-form-input",{attrs:{id:"inputSignIn1",type:"text",placeholder:"Введите логин",minlength:"3",maxlenght:"32",autofocus:"",required:""},model:{value:t.form.login,callback:function(e){t.$set(t.form,"login",e)},expression:"form.login"}})],1),a("b-form-group",{attrs:{id:"inputGroupSignIn2",label:"Ваш пароль:","label-for":"inputSignIn2",required:""}},[a("b-form-input",{attrs:{id:"inputSignIn2",type:"password",placeholder:"Введите пароль",minlength:"4",maxlenght:"32",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-button",{staticClass:"signin-container__submit",attrs:{type:"button",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("Войти ")])],1):t._e(),a("div",[a("b-modal",{attrs:{id:"modal-login","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v(" Введён неверный логин или пароль! ")])])],1)],1)},c=[],u=(a("96cf"),a("1da1")),d={name:"SignIn",data:function(){return{form:{login:"",password:""},show:!0,download:!1,errors:[]}},methods:{onSubmit:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt.post("/login/",t.form);case 3:a=e.sent,200===a.status&&(localStorage.setItem("id",a.data["u_id"]),localStorage.setItem("login",a.data["u_login"]),localStorage.setItem("role",a.data["u_type"]),t.onReset()),e.next=13;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$bvModal.show("modal-login"),setTimeout(function(){this.$bvModal.hide("modal-login")}.bind(t),2e3),t.errors.push(e.t0),console.log(t.errors);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))()},onReset:function(){this.download=!0,this.form.login="",this.form.password="",this.show=!1,setTimeout(function(){this.download=!1,this.$emit("sendResetShowOnPage")}.bind(this),100)}}},p=d,m=(a("840a"),a("2877")),h=Object(m["a"])(p,s,c,!1,null,"5e79369c",null),b=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup-container"},[t.show?a("b-form",{staticClass:"signup-container__form justify-content-center",on:{reset:t.onReset}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Логин:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Введите логин",minlength:"3",maxlenght:"32",autofocus:"",required:""},model:{value:t.form.login,callback:function(e){t.$set(t.form,"login",e)},expression:"form.login"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Почтовый адрес:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"email",placeholder:"Введите почту",maxlenght:"32",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",{attrs:{id:"input-group-3",label:"Ваш пароль:","label-for":"input-3"}},[a("b-form-input",{attrs:{id:"input-3",type:"password",placeholder:"Введите пароль",minlength:"4",maxlenght:"32",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Повторите пароль:","label-for":"input-4"}},[a("b-form-input",{attrs:{id:"input-4",type:"password",placeholder:"Введите пароль",minlength:"4",maxlenght:"32",required:""},model:{value:t.form.repeatPassword,callback:function(e){t.$set(t.form,"repeatPassword",e)},expression:"form.repeatPassword"}})],1),a("b-form-group",{attrs:{id:"input-group-5",label:"Выберите вашу роль:","label-for":"radiobutton"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.ariaDescribedby;return[a("b-form-radio-group",{attrs:{id:"radiobutton",type:"radio","aria-describedby":o,required:""},model:{value:t.form.user_type,callback:function(e){t.$set(t.form,"user_type",e)},expression:"form.user_type"}},[a("b-form-radio",{attrs:{value:"1"}},[t._v("Специалист службы ЭРТОС")]),a("b-form-radio",{attrs:{value:"2"}},[t._v("Застройщик приаэродромной зоны")])],1)]}}],null,!1,2609709339)}),a("div",{staticClass:"button__group"},[a("b-button",{staticClass:"signup-container__submit",attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v(" Зарегистрироваться ")])],1)],1):t._e(),a("div",[a("b-modal",{attrs:{id:"modal-login","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v(" Пароли должны совпадать! ")])])],1)],1)},g=[],v={name:"SignUp",data:function(){return{form:{email:"",login:"",password:"",user_type:"",repeatPassword:""},show:!0}},methods:{onSubmit:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.password!==t.form.repeatPassword&&(t.$bvModal.show("modal-login"),setTimeout(function(){this.$bvModal.hide("modal-login")}.bind(t),2e3)),e.prev=1,e.next=4,Dt.post("/registration/",t.form);case 4:a=e.sent,201===a.status&&t.onReset(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),t.errors.push(e.t0),console.log(t.errors);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onReset:function(){var t=this;this.form.email="",this.form.login="",this.form.password="",this.form.repeatPassword="",this.form.user_type="",this.show=!1,this.$nextTick((function(){t.show=!0})),this.$emit("sendResetRegistrationOnPage",this.show)}}},D=v,_=(a("183d"),Object(m["a"])(D,f,g,!1,null,"29c57a4c",null)),x=_.exports,y={name:"Header",components:{SignUp:x,SignIn:b,bus:_t},data:function(){return{showLink:!0,userLogin:null}},methods:{resetSignInFormOnPage:function(){this.$bvModal.hide("modal-signin"),this.getUserLogin()},resetSignUpFormOnPage:function(t){!1===t&&(this.$bvModal.hide("modal-signup"),this.$bvModal.show("modal-signin"),console.log(this.userLogin),this.getUserLogin())},getUserLogin:function(){this.userLogin=localStorage.getItem("login"),this.showLink=!1},resetUserLogin:function(){localStorage.removeItem("login"),localStorage.removeItem("role"),localStorage.removeItem("id"),this.showLink=!0}},mounted:function(){this.userLogin=localStorage.getItem("login"),null!==this.userLogin&&(this.showLink=!1)},updated:function(){console.log(_t),_t.$emit("updateEvent",!0)}},k=y,I=(a("d7c0"),Object(m["a"])(k,i,l,!1,null,"07d2aa51",null)),C=I.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"map__section"},[a("LeafletMap")],1)])},R=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-container"},[a("div",{staticClass:"map__modal"}),a("l-map",{ref:"map",attrs:{zoom:t.zoom,center:t.center},on:{"update:zoom":t.zoomUpdated,"update:center":t.centerUpdated,"update:bounds":t.boundsUpdated,click:t.clickHandler}},[null!==t.userRole?a("l-control",{staticClass:"navigation-panel",attrs:{position:"bottomleft"}},[a("div",{staticClass:"navigation-panel__button-container"},[a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Внести изменения",expression:"'Внести изменения'",modifiers:{hover:!0,top:!0}}],staticClass:"navigation-panel__nav-button",on:{click:function(e){t.navigationPanelClick=!t.navigationPanelClick}}},[a("b-icon",{attrs:{icon:"pencil","font-scale":"2.7",variant:"info"}})],1),!1===t.navigationPanelClick?a("div",{staticClass:"navigation-panel__arrow-button",on:{click:function(e){t.navigationPanelClick=!0}}},[a("b-icon",{attrs:{icon:"caret-right",animation:"","font-scale":"1",variant:"info"}})],1):t._e(),t.navigationPanelClick?a("div",{staticClass:"control_panel__group-container",attrs:{id:"panel-collapse"}},[a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Добавить новый объект",expression:"'Добавить новый объект'",modifiers:{hover:!0,top:!0}}],staticClass:"control_panel__extendable-button",on:{click:t.changeObjectsPanelVisible}},[a("b-icon",{attrs:{icon:"plus-circle","font-scale":"2.7",variant:"info"}})],1),a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Изменить объект",expression:"'Изменить объект'",modifiers:{hover:!0,top:!0}},{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],staticClass:"control_panel__extendable-button",class:{active:t.editBtn},on:{click:function(e){t.editBtn=!t.editBtn}}},[a("b-icon",{attrs:{icon:"pencil-square","font-scale":"2.7",variant:"info"}})],1),a("button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Удалить объект",expression:"'Удалить объект'",modifiers:{hover:!0,top:!0}}],staticClass:"control_panel__extendable-button",class:{active:t.deleteBtn},on:{click:function(e){t.deleteBtn=!t.deleteBtn}}},[a("b-icon",{attrs:{icon:"trash","font-scale":"2.7",variant:"info"}})],1),a("div",{staticClass:"navigation-panel__arrow-button control_panel__extendable-button",on:{click:function(e){t.navigationPanelClick=!1}}},[a("b-icon",{attrs:{icon:"caret-left",animation:"","font-scale":"1",variant:"info"}})],1)]):t._e()])]):t._e(),a("l-control",{attrs:{position:"topright"}},[!t.openAddPanel||t.deleteBtn||t.openTubePanel?t._e():a("MapObjectsPanel",{on:{sendObjectsInformation:t.showChildOnMap,sendDirectionOnMap:t.showDirectionLineOnMap,sendChildClickOnCoordinateButton:t.showChildCoordinateOnMap,sendDevClickOnCoordinateButton:function(e){t.tubeCoordinate=!0},updatePolylineArr:t.updatePolArr}}),t.openTubePanel?a("div",[a("div",{staticClass:"coordinate-panel"},[a("h6",{staticClass:"coordinate-panel__title"},[t._v("Застройщик приаэродномной зоны")]),a("button",{staticClass:"coordinate-panel__close-button",on:{click:function(e){t.openCoordinatePanel=!1}}},[a("b-icon",{attrs:{icon:"x-circle-fill","font-scale":"1.8",variant:"warning"}})],1)]),a("div",{staticClass:"tube-panel__container"},[a("b-form",{staticClass:"tube-panel__form-container",on:{submit:function(t){t.preventDefault()}}},[a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Указать координаты объекта",expression:"'Указать координаты объекта'",modifiers:{hover:!0,top:!0}}],staticClass:"location-button__arp w-25",attrs:{type:"button",variant:"primary"}},[0===t.tubeDataDev.length?a("b-icon",{attrs:{icon:"geo-alt","font-scale":"1.5",variant:"info",animation:"cylon-vertical"}}):a("b-icon",{attrs:{icon:"geo-alt","font-scale":"1.5",variant:"info"}})],1)],1)],1),0!==t.tubeDataDev.length?a("l-polyline",{attrs:{"lat-lngs":t.tubeDataDev,color:t.polyline.color}}):t._e()],1):t._e()],1),a("l-control",{directives:[{name:"show",rawName:"v-show",value:t.openCoordinatePanel,expression:"openCoordinatePanel"}],attrs:{position:"topleft"}},[a("div",{staticClass:"coordinate-panel"},[a("h6",{staticClass:"coordinate-panel__title"},[t._v("Панель координат")]),a("button",{staticClass:"coordinate-panel__close-button",on:{click:function(e){t.openCoordinatePanel=!1}}},[a("b-icon",{attrs:{icon:"x-circle-fill","font-scale":"1.8",variant:"warning"}})],1)]),a("b-form",{staticClass:"coordinate-panel__form"},[a("b-form-group",{attrs:{label:"Отметьте на карте или введите координаты:","label-for":"coordinate1"}},[a("div",{staticClass:"coordinate-panel__inputs"},[a("b-form-input",{staticClass:"w-50",attrs:{id:"coordinate1",type:"number",placeholder:"Введите lat",min:"1",step:"0.000001"},model:{value:t.latitude,callback:function(e){t.latitude=t._n(e)},expression:"latitude"}}),a("b-form-input",{staticClass:"w-50",attrs:{id:"coordinate2",type:"number",placeholder:"Введите lon",min:"1",step:"0.000001"},model:{value:t.longtitude,callback:function(e){t.longtitude=t._n(e)},expression:"longtitude"}})],1)]),a("b-button",{staticClass:"add-button__coordinate",attrs:{type:"button",variant:"primary"},on:{click:t.clickOnCoordinatePanelBtn}},[t._v(" Подтвердить ")])],1)],1),t._l(t.circleDataARP,(function(e){return a("div",{key:e.id},[a("div",[a("l-circle",{attrs:{"lat-lng":[e.latitude,e.longtitude],radius:e.r,color:e.color,fillColor:e.fillColor}}),a("l-circle",{attrs:{"lat-lng":[e.latitude,e.longtitude],radius:e.j,color:e.color,fillColor:e.fillColor},on:{click:function(a){return t.editChildOnMap(e)}}})],1)])})),t._l(t.polygonDataGRM,(function(e){return a("div",{key:e.id},[a("l-polygon",{attrs:{"lat-lngs":e.coords,color:e.color},on:{click:function(a){return t.editChildOnMap(e)}}})],1)})),t.polyline.showPolyline?a("l-polyline",{attrs:{"lat-lngs":t.polyline.latlngs,color:t.polyline.color,weight:10}}):t._e(),t._l(t.tubeDataDev,(function(e){return a("l-polyline",{key:e.id,attrs:{"lat-lngs":e.polyline,color:e.color,weight:10},on:{click:function(a){return t.editChildOnMap(e)}}})})),t._l(t.circleDataDEV,(function(e){return a("div",{key:e.id},[a("l-circle",{attrs:{"lat-lng":[e.latitude,e.longtitude],radius:e.radius,color:e.color,fillColor:e.fillColor},on:{click:function(a){return t.editChildOnMap(e)}}})],1)})),a("l-tile-layer",{attrs:{url:t.url}})],2),a("div",[a("b-modal",{attrs:{id:"modalInfoOnMap","hide-backdrop":"","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v(t._s(t.modalText))])])],1),a("div",[a("b-modal",{attrs:{id:"modalInfoDirection","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v("Укажите две точки для выбора направления")]),a("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("modalInfoDirection")}}},[t._v("Всё понятно!")])],1)],1),a("div",[a("b-modal",{attrs:{id:"modalInfoOnMap","hide-backdrop":"","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v(t._s(t.modalText))])])],1),a("div",[a("b-modal",{attrs:{id:"modalHeightAlert","hide-backdrop":"","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-4"},[t._v(t._s(t.modalText))]),a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:function(e){return t.$bvModal.hide("modalHeightAlert")}}},[t._v("Okay")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.changeInfo,expression:"changeInfo"}]},[a("b-sidebar",{attrs:{id:"sidebar-right",right:"",shadow:"","no-header-close":""}},[a("div",{staticClass:"px-3 py-2"},[a("h5",[a("strong",[t._v("Внести изменения:")])]),a("hr"),2!==this.arrType&&4!==this.arrType?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Указать местоположение объекта",expression:"'Указать местоположение объекта'",modifiers:{hover:!0,top:!0}}],staticClass:"location-button__arp w-25",attrs:{type:"button",variant:"primary"},on:{click:function(e){return t.showChildCoordinateOnMap(!0)}}},[a("b-icon",{attrs:{icon:"geo-alt","font-scale":"1.5",variant:"info"}})],1):t._e(),2===this.arrType?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Выбор направления объекта",expression:"'Выбор направления объекта'",modifiers:{hover:!0,top:!0}}],staticClass:"location-button__arp w-25",attrs:{type:"button",variant:"primary"},on:{click:t.showDirectionLineOnMap}},[a("b-icon",{attrs:{icon:"arrow-up-right","font-scale":"1.5",variant:"info"}})],1):t._e(),4!==this.arrType?a("div",t._l(t.changeInfo,(function(e,o){return a("div",{key:o},[a("p",[t._v(t._s(e[0]))]),a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите новые данные",min:"1"},model:{value:e[1],callback:function(a){t.$set(e,1,t._n(a))},expression:"info[1]"}}),a("hr")],1)})),0):t._e(),4===this.arrType?a("div",[a("p",[t._v(t._s(t.changeInfo[0]))]),a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите новые данные",min:"1"},model:{value:t.changeInfo[1],callback:function(e){t.$set(t.changeInfo,1,t._n(e))},expression:"changeInfo[1]"}}),a("hr"),a("p",[t._v("Координаты объекта:")]),t._l(t.changePolyline,(function(e,o){return a("div",{key:o},[a("div",{staticClass:"coord-container"},[a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите новые данные",min:"1"},model:{value:e[0],callback:function(a){t.$set(e,0,t._n(a))},expression:"info[0]"}}),a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите новые данные",min:"1"},model:{value:e[1],callback:function(a){t.$set(e,1,t._n(a))},expression:"info[1]"}}),a("button",{staticClass:"delete-coord_button",attrs:{type:"button"},on:{click:function(e){return t.changePolyline.splice(o,1)}}},[a("b-icon",{attrs:{icon:"x-circle-fill","font-scale":"1.8",variant:"warning"}})],1)],1),a("hr")])}))],2):t._e(),a("b-button",{staticClass:"add-button",attrs:{type:"submit",variant:"primary"},on:{click:t.saveEditInfo}},[t._v(" Сохранить изменения ")])],1)])],1)],1)},j=[],P=(a("a434"),a("a9e3"),a("b680"),a("3ca3"),a("ddb0"),a("53ca")),F=a("5530"),O=a("2699"),G=a("a40a"),A=a("0dbd"),$=a("2253"),T=a("258a"),E=a("635f"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return!1===t.closeForm?a("div",{staticClass:"object-panel-container"},[a("div",{staticClass:"object-panel-container__title-container"},["1"===t.role?a("h6",{staticClass:"object-panel-container__title"},[t._v("Специалист службы ЭРТОС")]):t._e(),"2"===t.role?a("h6",{staticClass:"object-panel-container__title"},[t._v("Застройщик приаэродромной зоны")]):t._e(),a("button",{staticClass:"object-panel-container__close-button",on:{click:function(e){t.closeForm=!0}}},[a("b-icon",{attrs:{icon:"x-circle-fill","font-scale":"1.8",variant:"warning"}})],1)]),a("b-form",{staticClass:"object-panel-container__form-container",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"object-panel-container__select-container"},["2"!==t.role?a("b-form-select",{attrs:{options:t.options,required:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):a("b-form-select",{attrs:{options:t.optionsDev,required:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),null!==t.selected&&2!==t.selected?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Указать местоположение объекта",expression:"'Указать местоположение объекта'",modifiers:{hover:!0,top:!0}}],staticClass:"location-button__arp w-25",attrs:{type:"button",variant:"primary"},on:{click:t.sendClickOnCoordinateButton}},[1!==t.clickCounter?a("b-icon",{attrs:{icon:"geo-alt","font-scale":"1.5",variant:"info",animation:"cylon-vertical"}}):a("b-icon",{attrs:{icon:"geo-alt","font-scale":"1.5",variant:"info"}})],1):t._e(),2===t.selected?a("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Выбор направления объекта",expression:"'Выбор направления объекта'",modifiers:{hover:!0,top:!0}}],staticClass:"location-button__arp w-25",attrs:{type:"button",variant:"primary"},on:{click:t.sendDirectionOnMap}},[!1===t.clickCoordinate?a("b-icon",{attrs:{icon:"arrow-up-right","font-scale":"1.5",variant:"info",animation:"cylon"}}):a("b-icon",{attrs:{icon:"arrow-up-right","font-scale":"1.5",variant:"info"}})],1):t._e()],1),1===t.selected?a("div",{staticClass:"form-container",attrs:{id:"arpGroup"}},[a("b-form-group",{attrs:{label:"Радиус цилиндра r (м):","label-for":"radiusCylinder"}},[a("b-form-input",{attrs:{id:"radiusCylinder",type:"number",placeholder:"Введите радиус цилиндра",min:"1"},model:{value:t.ArpFormData.r,callback:function(e){t.$set(t.ArpFormData,"r",t._n(e))},expression:"ArpFormData.r"}})],1),a("b-form-group",{attrs:{label:"Угол α (°):","label-for":"angleAlpha"}},[a("b-form-input",{attrs:{id:"angleAlpha",type:"number",placeholder:"Введите угол альфа",min:"1"},model:{value:t.ArpFormData.a,callback:function(e){t.$set(t.ArpFormData,"a",t._n(e))},expression:"ArpFormData.a"}})],1),a("b-form-group",{attrs:{label:"Радиус конуса R (м):","label-for":"radiusCone"}},[a("b-form-input",{attrs:{id:"radiusCone",type:"number",placeholder:"Введите радиус конуса",min:"1"},model:{value:t.ArpFormData.R,callback:function(e){t.$set(t.ArpFormData,"R",t._n(e))},expression:"ArpFormData.R"}})],1),a("b-form-group",{attrs:{label:"Радиус цилиндра j (м):","label-for":"radiusCyl2"}},[a("b-form-input",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Только ветряная турбина(ы) [крупная металлическая конструкция]",expression:"'Только ветряная турбина(ы) [крупная металлическая конструкция]'",modifiers:{hover:!0,top:!0}}],attrs:{id:"radiusCylinder2",type:"number",placeholder:"Введите радиус цилиндра",min:"1"},model:{value:t.ArpFormData.j,callback:function(e){t.$set(t.ArpFormData,"j",t._n(e))},expression:"ArpFormData.j"}})],1),a("b-form-group",{attrs:{label:"Высота цилиндра j (м):","label-for":"heightCyl2"}},[a("b-form-input",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Только ветряная турбина(ы) [крупная металлическая конструкция]:",expression:"'Только ветряная турбина(ы) [крупная металлическая конструкция]:'",modifiers:{hover:!0,top:!0}}],staticClass:"important-input",attrs:{id:"heightCylinder2",type:"number",placeholder:"Введите высоту цилиндра",min:"1",required:""},model:{value:t.ArpFormData.h,callback:function(e){t.$set(t.ArpFormData,"h",t._n(e))},expression:"ArpFormData.h"}})],1)],1):t._e(),2===t.selected?a("div",{staticClass:"form-container",attrs:{id:"grmGroup"}},[a("div",{staticClass:"form-container__items"},[a("b-form-group",{attrs:{label:"a (м):","label-for":"grm_a"}},[a("b-form-input",{attrs:{id:"grm_a",type:"number",placeholder:"Введите a",min:"1"},on:{change:t.updateRadius},model:{value:t.GrmFormData.a,callback:function(e){t.$set(t.GrmFormData,"a",t._n(e))},expression:"GrmFormData.a"}})],1),a("b-form-group",{attrs:{label:"b (м):","label-for":"grm_b"}},[a("b-form-input",{attrs:{id:"grm_b",type:"number",placeholder:"Введите b",min:"1"},model:{value:t.GrmFormData.b,callback:function(e){t.$set(t.GrmFormData,"b",t._n(e))},expression:"GrmFormData.b"}})],1)],1),a("div",{staticClass:"form-container__items"},[a("b-form-group",{attrs:{label:"h (м):","label-for":"grm_h"}},[a("b-form-input",{attrs:{id:"grm_h",type:"number",placeholder:"Введите h",min:"1"},model:{value:t.GrmFormData.h,callback:function(e){t.$set(t.GrmFormData,"h",t._n(e))},expression:"GrmFormData.h"}})],1),a("b-form-group",{attrs:{label:"r (м)","label-for":"grm_r"}},[a("b-form-input",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"r + a",expression:"'r + a'",modifiers:{hover:!0,top:!0}}],attrs:{id:"grm_r",type:"number",placeholder:"Введите радиус цилиндра",min:"1",disabled:""},model:{value:t.GrmFormData.r,callback:function(e){t.$set(t.GrmFormData,"r",t._n(e))},expression:"GrmFormData.r"}})],1)],1),a("div",{staticClass:"form-container__items"},[a("b-form-group",{attrs:{label:"D (м)","label-for":"grm_D"}},[a("b-form-input",{attrs:{id:"grm_D",type:"number",placeholder:"Введите высоту цилиндра",min:"1"},model:{value:t.GrmFormData.D,callback:function(e){t.$set(t.GrmFormData,"D",t._n(e))},expression:"GrmFormData.D"}})],1),a("b-form-group",{attrs:{label:"H (м)","label-for":"grm_H"}},[a("b-form-input",{attrs:{id:"grm_H",type:"number",placeholder:"Введите высоту цилиндра",min:"1"},model:{value:t.GrmFormData.H,callback:function(e){t.$set(t.GrmFormData,"H",t._n(e))},expression:"GrmFormData.H"}})],1)],1),a("div",{staticClass:"form-container__items"},[a("b-form-group",{attrs:{label:"L (м)","label-for":"grm_L"}},[a("b-form-input",{attrs:{id:"grm_L",type:"number",placeholder:"Введите высоту цилиндра",min:"1"},model:{value:t.GrmFormData.L,callback:function(e){t.$set(t.GrmFormData,"L",t._n(e))},expression:"GrmFormData.L"}})],1),a("b-form-group",{attrs:{label:"φ (°)","label-for":"grm_Fi"}},[a("b-form-input",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Введите высоту цилиндра",expression:"'Введите высоту цилиндра'",modifiers:{hover:!0,top:!0}}],attrs:{id:"grm_Fi",type:"number",placeholder:"Введите высоту цилиндра",min:"15",required:""},model:{value:t.GrmFormData.fi,callback:function(e){t.$set(t.GrmFormData,"fi",t._n(e))},expression:"GrmFormData.fi"}})],1)],1)]):t._e(),3===t.selected?a("div",{staticClass:"form-container",attrs:{id:"devGroup"}},[a("b-form-group",{attrs:{label:"Высота объекта (относительная, в м):","label-for":"objectHeight"}},[a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите высоту объекта",min:"1",required:""},model:{value:t.DevDotFormData.h,callback:function(e){t.$set(t.DevDotFormData,"h",t._n(e))},expression:"DevDotFormData.h"}})],1),a("b-button",{staticClass:"add-button",attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.sendDataToMap()}}},[t._v(" Рассчитать ")])],1):t._e(),4===t.selected?a("div",{staticClass:"form-container",attrs:{id:"devRouteGroup"}},[a("b-form-group",{attrs:{label:"Высота объекта (относительная, в м):","label-for":"objectHeight"}},[a("b-form-input",{attrs:{id:"objectHeight",type:"number",placeholder:"Введите высоту объекта",min:"1",required:""},model:{value:t.DevRouteFormData.h,callback:function(e){t.$set(t.DevRouteFormData,"h",t._n(e))},expression:"DevRouteFormData.h"}}),!0===t.clickCoordinate?a("div",t._l(t.DevRouteFormData.polyline,(function(e,o){return a("div",{key:e,staticClass:"coordinate-panel__inputs"},[a("b-form-input",{staticClass:"w-50",attrs:{id:"coordinate1",type:"number",placeholder:"Введите lat",min:"1",step:"0.000001"},model:{value:e[0],callback:function(a){t.$set(e,0,t._n(a))},expression:"info[0]"}}),a("b-form-input",{staticClass:"w-50",attrs:{id:"coordinate2",type:"number",placeholder:"Введите lon",min:"1",step:"0.000001"},model:{value:e[1],callback:function(a){t.$set(e,1,t._n(a))},expression:"info[1]"}}),a("button",{staticClass:"form-container__delete-button",attrs:{type:"button"},on:{click:function(e){return t.deleteDevElem(o)}}},[a("b-icon",{attrs:{icon:"x-circle-fill","font-scale":"1.8",variant:"warning"}})],1)],1)})),0):t._e()],1)],1):t._e(),1===t.selected||2===t.selected?a("b-button",{staticClass:"add-button",attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.sendDataToMap()}}},[t._v(" Добавить ")]):t._e(),4===t.selected&&!0===t.clickCoordinate?a("b-button",{staticClass:"add-button",attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.sendDataToMap()}}},[t._v(" Сохранить объект ")]):t._e()],1),a("div",[a("b-modal",{attrs:{id:"modal-info","hide-backdrop":"","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-2"},[t._v(" "+t._s(t.modals)+" ")])])],1),a("div",[a("b-modal",{attrs:{id:"modalDevRoute","hide-backdrop":"","content-class":"shadow","hide-header":"","hide-footer":"",centered:""}},[a("p",{staticClass:"my-4"},[t._v("Для установки объекта укажите начальную координату")]),a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-success",block:""},on:{click:function(e){return t.$bvModal.hide("modalDevRoute")}}},[t._v("Всё понятно ")])],1)],1)],1):t._e()},L=[],H={name:"MapObjectsPanel",props:{devRoute_data:{type:Array,default:function(){return[]}}},components:{bus:_t},data:function(){return{selected:null,options:[{value:null,text:"Выберите тип навигационного средства:"},{value:1,text:"АРП"},{value:2,text:"КРМ (двухканальный)"}],optionsDev:[{value:null,text:"Выберите тип объекта:"},{value:3,text:"Труба"},{value:4,text:"Трубопроводная магистраль"}],ArpFormData:{id:null,userId:null,objId:1,r:500,a:1,R:3e3,j:1e4,h:52,latitude:null,longtitude:null,color:"#54b0a2",fillColor:"#83e3d4"},GrmFormData:{id:null,objId:2,userId:null,a:40,b:500,h:70,r:6e3,D:500,H:20,L:1500,fi:20,latitude:null,longtitude:null,coords:null,secondPoint:null,color:"#54b0a2",fillColor:"#83e3d4"},DevDotFormData:{id:null,objId:3,userId:null,h:1e3,r:20,latitude:null,longtitude:null,color:"#473c36",fillColor:"#2f2d24"},DevRouteFormData:{id:null,objId:4,userId:null,h:null,polyline:[],latitude:null,longtitude:null,color:"#2f3534"},click:!1,clickCounter:0,clickCoordinate:!1,closeForm:!1,modalCounter:1,modals:null,role:null,valueA:null}},methods:{sendDataToMap:function(){0===this.clickCounter&&2!==this.selected?this.showModal(1):1===this.selected?null===this.ArpFormData.h?console.log("kek"):(this.$emit("sendObjectsInformation",this.selected,this.ArpFormData),this.resetForm()):2===this.selected?!1===this.clickCoordinate?this.showModal(2):null===this.GrmFormData.fi?this.showModal(3):this.GrmFormData.fi>90?this.showModal(5):(this.$emit("sendObjectsInformation",this.selected,this.GrmFormData),this.resetForm()):3===this.selected?!1===this.clickCounter?this.showModal(1):null===this.DevDotFormData.h?console.log("kek"):(this.$emit("sendObjectsInformation",this.selected,this.DevDotFormData),this.resetForm()):4===this.selected&&(null===this.DevRouteFormData.h?console.log("kek"):(this.$emit("sendObjectsInformation",this.selected,this.DevRouteFormData),this.resetForm()))},sendClickOnCoordinateButton:function(){this.click=!0,this.clickCounter=1,4!==this.selected?this.$emit("sendChildClickOnCoordinateButton",this.click):this.$emit("sendDevClickOnCoordinateButton",this.click)},sendDirectionOnMap:function(){this.clickCoordinate=!0,this.$emit("sendDirectionOnMap",this.clickCoordinate)},showModal:function(t){1===t&&(this.modals="Укажите координаты объекта!"),2===t&&(this.modals="Необходимо выбрать направление объекта!"),3===t&&(this.modals="Необходимо указать угол!"),4===t&&(this.modals="Необходимо указать высоту!"),5===t&&(this.modals="Угол не должен быть больше 90°!"),this.$bvModal.show("modal-info"),setTimeout(function(){this.$bvModal.hide("modal-info")}.bind(this),2e3)},updateRadius:function(){this.GrmFormData.r+=this.GrmFormData.a-this.valueA,this.valueA=this.GrmFormData.a},resetForm:function(){this.clickCounter=0,this.clickCoordinate=!1,this.closeForm=!this.closeForm},deleteDevElem:function(t){this.DevRouteFormData.polyline.splice(t,1),this.$emit("updatePolylineArr",this.DevRouteFormData.polyline)}},created:function(){var t=this;_t.$on("updateDevArr",(function(e){if(e){t.DevRouteFormData.polyline.push(e);var a=t.DevRouteFormData.polyline;a[a.length-1]===a[a.length-2]&&t.DevRouteFormData.polyline.pop(e),t.clickCoordinate=!0}}))},mounted:function(){this.role=localStorage.getItem("role"),this.valueA=this.GrmFormData.a,this.GrmFormData.r+=this.GrmFormData.a},updated:function(){this.role=localStorage.getItem("role"),4===this.selected&&1===this.modalCounter&&(this.$bvModal.show("modalDevRoute"),this.modalCounter++)}},N=H,B=(a("a385"),Object(m["a"])(N,S,L,!1,null,"2d7eec4d",null)),V=B.exports,U={name:"LeafletMap",props:{},components:{MapObjectsPanel:V,bus:_t,LMap:O["a"],LTileLayer:G["a"],LCircle:A["a"],LControl:$["a"],LPolygon:T["a"],LPolyline:E["a"]},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:14,center:[59.798303,30.280123],cursor:!0,bounds:null,polyline:{latlngs:[],color:"#54b0a2",showPolyline:!1},circleDataARP:[],polygonDataGRM:[],circleDataDEV:[],tubeDataDev:[],navigationPanelClick:!1,openCoordinatePanel:!1,openAddPanel:!1,openTubePanel:!1,editBtn:!1,deleteBtn:!1,pointCoordinate:!1,heightAlert:!1,tubeCoordinate:!1,latitude:null,longtitude:null,userRole:null,userName:null,userId:null,modalText:"",errors:[],changeInfo:null,changePolyline:null,arrIdx:null,arrType:null}},methods:{zoomUpdated:function(t){this.zoom=t},centerUpdated:function(t){this.center=t},boundsUpdated:function(t){this.bounds=t},clickHandler:function(t){if(!0===this.openCoordinatePanel&&(this.latitude=t.latlng.lat.toFixed(6),this.longtitude=t.latlng.lng.toFixed(6)),!0===this.pointCoordinate){this.latitude=t.latlng.lat,this.longtitude=t.latlng.lng,this.polyline.showPolyline=!0;var e=[this.latitude,this.longtitude];this.polyline.latlngs.length<2&&(this.polyline.latlngs.push(e),2===this.polyline.latlngs.length&&(this.pointCoordinate=!1,this.$bvModal.hide("modalInfoDirection"),this.showModalInformation(4),this.latitude=this.polyline.latlngs[0][0],this.longtitude=this.polyline.latlngs[0][1]))}if(!0===this.tubeCoordinate){this.latitude=t.latlng.lat.toFixed(4),this.longtitude=t.latlng.lng.toFixed(4),this.polyline.showPolyline=!0;var a=[this.latitude,this.longtitude];this.polyline.color="#817f7f",this.polyline.latlngs.push(a),_t.$emit("updateDevArr",a)}},updatePolArr:function(t){this.polyline.latlngs=t},clickOnCoordinatePanelBtn:function(){this.latitude&&null!==this.longtitude?this.openCoordinatePanel=!this.openCoordinatePanel:this.showModalInformation(3)},showChildOnMap:function(t,e){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,r,i,l,s,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=Object(F["a"])({},e),!a.latitude||null===a.longtitude){o.next=81;break}if(n["latitude"]=a.latitude,n["longtitude"]=a.longtitude,n["userId"]=Number(a.userId),2!==t){o.next=18;break}return n["secondPoint"]=a.polyline.latlngs[1],o.prev=7,o.next=10,Dt.post("/bra_coords/",{latitude:n["latitude"],longtitude:n["longtitude"],second_point:n["secondPoint"],params:n});case 10:r=o.sent,console.log(r),n["coords"]=r.data["coords"],o.next=18;break;case 15:o.prev=15,o.t0=o["catch"](7),a.errors.push(o.t0);case 18:if(3===t||4===t){o.next=29;break}return o.prev=19,o.next=22,Dt.post("/add_user_object/",{user_login:localStorage.getItem("login"),object_id:t,params:n});case 22:i=o.sent,n["id"]=i.data["uo_id"],o.next=29;break;case 26:o.prev=26,o.t1=o["catch"](19),a.errors.push(o.t1);case 29:if(1===t&&(a.circleDataARP.push(n),a.showModalInformation(1)),2===t&&(a.polyline.latlngs=null,a.polyline.showPolyline=!1,a.polygonDataGRM.push(n),a.showModalInformation(1),a.polyline.latlngs=[]),3!==t){o.next=52;break}return n["radius"]=150,o.next=35,a.calculateIntersection(n["h"],n["objId"]);case 35:if(l=o.sent,200!==l){o.next=51;break}return o.prev=37,o.next=40,Dt.post("/add_user_object/",{user_login:localStorage.getItem("login"),object_id:t,params:n});case 40:s=o.sent,n["id"]=s.data["uo_id"],o.next=47;break;case 44:o.prev=44,o.t2=o["catch"](37),a.errors.push(o.t2);case 47:a.circleDataDEV.push(n),a.showModalInformation(1),o.next=52;break;case 51:0===l["height_error"]?(a.modalText="Переместите объект от центра БРА",a.$bvModal.show("modalHeightAlert"),a.changeIntersectionColor(a.circleDataARP,a.polygonDataGRM,l)):0!==l["height_error"]&&(a.modalText="Переместите объект от центра БРА или уменьшите высоту на ".concat(l["height_error"].toFixed(1)),a.$bvModal.show("modalHeightAlert"),a.changeIntersectionColor(a.circleDataARP,a.polygonDataGRM,l));case 52:if(4!==t){o.next=77;break}return n["latitude"]=a.polyline.latlngs[0][0],n["longtitude"]=a.polyline.latlngs[0][1],n["polyline"]=a.polyline.latlngs,a.polyline.latlngs=[],o.next=59,a.calculateIntersection(n["h"],n["objId"],n["polyline"]);case 59:if(c=o.sent,200!==c){o.next=76;break}return o.prev=61,o.next=64,Dt.post("/add_user_object/",{user_login:localStorage.getItem("login"),object_id:t,params:n});case 64:u=o.sent,n["id"]=u.data["uo_id"],o.next=71;break;case 68:o.prev=68,o.t3=o["catch"](61),a.errors.push(o.t3);case 71:a.tubeDataDev.push(n),a.tubeCoordinate=!1,a.showModalInformation(1),o.next=77;break;case 76:0===c["height_error"]?(a.modalText="Переместите объект от центра БРА",a.$bvModal.show("modalHeightAlert"),a.changeIntersectionColor(a.circleDataARP,a.polygonDataGRM,c)):0!==c["height_error"]&&(a.modalText="Переместите объект от центра БРА или уменьшите высоту на ".concat(c["height_error"].toFixed(1)),a.$bvModal.show("modalHeightAlert"),a.changeIntersectionColor(a.circleDataARP,a.polygonDataGRM,c));case 77:a.latitude=null,a.longtitude=null,a.openCoordinatePanel=!1,a.changeObjectsPanelVisible();case 81:case"end":return o.stop()}}),o,null,[[7,15],[19,26],[37,44],[61,68]])})))()},changeIntersectionColor:function(t,e,a){for(var o=this,n=function(e){if(t[e]["id"]===a["uo_id"]){var n=t[e]["color"],r=t[e]["fillColor"];return t[e]["color"]="#b05457",t[e]["fillColor"]="#e07f82",setTimeout(function(){t[e]["color"]=n,t[e]["fillColor"]=r}.bind(o),2e3),{v:void 0}}},r=0;r<t.length;r++){var i=n(r);if("object"===Object(P["a"])(i))return i.v}for(var l=function(t){if(e[t]["id"]===a["uo_id"]){var n=e[t]["color"],r=e[t]["fillColor"];return e[t]["color"]="#b05457",e[t]["fillColor"]="#e07f82",setTimeout(function(){e[t]["color"]=n,e[t]["fillColor"]=r}.bind(o),2e3),{v:void 0}}},s=0;s<e.length;s++){var c=l(s);if("object"===Object(P["a"])(c))return c.v}},calculateIntersection:function(t,e){var a=arguments,o=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:[],n.prev=1,n.next=4,Dt.post("/bra/",{latitude:o.latitude,longtitude:o.longtitude,height:t,object_type:e,points_list:r});case 4:return i=n.sent,n.abrupt("return",i.status);case 8:return n.prev=8,n.t0=n["catch"](1),o.errors.push(n.t0),n.abrupt("return",n.t0.response.data);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},calculateIntersectionForEdit:function(t,e,a,o){var n=arguments,r=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var l,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return l=n.length>4&&void 0!==n[4]?n[4]:[],i.prev=1,i.next=4,Dt.post("/bra/",{latitude:t,longtitude:e,height:a,object_type:o,points_list:l});case 4:return s=i.sent,i.abrupt("return",s.status);case 8:return i.prev=8,i.t0=i["catch"](1),r.errors.push(i.t0),i.abrupt("return",i.t0.response.data);case 12:case"end":return i.stop()}}),i,null,[[1,8]])})))()},showChildCoordinateOnMap:function(t){!0===t&&(this.openCoordinatePanel=!0)},editChildOnMap:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var o,n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0===e.deleteBtn&&!0===e.editBtn&&(e.modalText="Необходимо выбрать один режим изменения объекта",e.$bvModal.show("modalHeightAlert")),!0!==e.deleteBtn||!1!==e.editBtn){a.next=15;break}if(e.modalText="",1!==t["objId"]||"1"!==e.userRole){a.next=6;break}return a.next=6,e.deleteObjectOnMap(t,e.circleDataARP);case 6:if(2!==t["objId"]||"1"!==e.userRole){a.next=9;break}return a.next=9,e.deleteObjectOnMap(t,e.polygonDataGRM);case 9:if(3!==t["objId"]||"2"!==e.userRole){a.next=12;break}return a.next=12,e.deleteObjectOnMap(t,e.circleDataDEV);case 12:if(4!==t["objId"]||"2"!==e.userRole){a.next=15;break}return a.next=15,e.deleteObjectOnMap(t,e.tubeDataDev);case 15:if(!1!==e.deleteBtn||!0!==e.editBtn){a.next=32;break}if(e.modalText="",1===t["objId"]&&"1"===e.userRole)for(o=0;o<e.circleDataARP.length;o++)e.circleDataARP[o]["id"]===t["id"]&&e.circleDataARP[o]["userId"]===Number(e.userId)&&(e.prevCenter=e.center,e.center=[Number(e.circleDataARP[o]["latitude"]),Number(e.circleDataARP[o]["longtitude"])],e.changeInfo=[["Радиус цилиндра r (м):",e.circleDataARP[o]["r"]],["Угол α (°):",e.circleDataARP[o]["a"]],["Радиус конуса R (м):",e.circleDataARP[o]["R"]],["Радиус цилиндра j (м):",e.circleDataARP[o]["j"]],["Высота цилиндра j (м):",e.circleDataARP[o]["h"]]],e.arrIdx=o,e.arrType=e.circleDataARP[o]["objId"]);if(2!==t["objId"]||"1"!==e.userRole){a.next=30;break}n=0;case 20:if(!(n<e.polygonDataGRM.length)){a.next=30;break}if(e.polygonDataGRM[n]["id"]!==t["id"]||e.polygonDataGRM[n]["userId"]!==Number(e.userId)){a.next=27;break}return e.center=[Number(e.polygonDataGRM[n]["latitude"]),Number(e.polygonDataGRM[n]["longtitude"])],e.changeInfo=[["a (м):",e.polygonDataGRM[n]["a"]],["b (м):",e.polygonDataGRM[n]["b"]],["h (м):",e.polygonDataGRM[n]["h"]],["D (м):",e.polygonDataGRM[n]["D"]],["H (м):",e.polygonDataGRM[n]["H"]],["L (м):",e.polygonDataGRM[n]["L"]],["φ (°):",e.polygonDataGRM[n]["fi"]]],e.arrIdx=n,e.arrType=e.polygonDataGRM[n]["objId"],a.abrupt("break",30);case 27:n++,a.next=20;break;case 30:if(3===t["objId"]&&"2"===e.userRole)for(r=0;r<e.circleDataDEV.length;r++)e.circleDataDEV[r]["id"]===t["id"]&&e.circleDataDEV[r]["userId"]===Number(e.userId)&&(e.center=[Number(e.circleDataDEV[r]["latitude"]),Number(e.circleDataDEV[r]["longtitude"])],e.changeInfo=[["Высота объекта (относительная, в м):",e.circleDataDEV[r]["h"]]],e.arrIdx=r,e.arrType=e.circleDataDEV[r]["objId"]);if(4===t["objId"]&&"2"===e.userRole)for(console.log(t["id"]),i=0;i<e.circleDataDEV.length;i++)e.tubeDataDev[i]["id"]===t["id"]&&e.tubeDataDev[i]["userId"]===Number(e.userId)&&(e.center=[Number(e.tubeDataDev[i]["latitude"]),Number(e.tubeDataDev[i]["longtitude"])],e.changeInfo=["Высота объекта (относительная, в м):",e.tubeDataDev[i]["h"]],e.changePolyline=e.tubeDataDev[i]["polyline"],e.arrIdx=i,e.arrType=e.tubeDataDev[i]["objId"]);case 32:case"end":return a.stop()}}),a)})))()},saveEditInfo:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,o,n,r,i,l,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==t.arrType){e.next=17;break}return t.circleDataARP[t.arrIdx]["r"]=t.changeInfo[0][1],t.circleDataARP[t.arrIdx]["a"]=t.changeInfo[1][1],t.circleDataARP[t.arrIdx]["R"]=t.changeInfo[2][1],t.circleDataARP[t.arrIdx]["j"]=t.changeInfo[3][1],t.circleDataARP[t.arrIdx]["h"]=t.changeInfo[4][1],null!==t.latitude&&null!==t.longtitude&&(t.circleDataARP[t.arrIdx]["latitude"]=t.latitude,t.circleDataARP[t.arrIdx]["longtitude"]=t.longtitude),e.prev=7,e.next=10,Dt.post("/update_map_object/",{user_login:localStorage.getItem("login"),object_id:t.circleDataARP[t.arrIdx]["id"],params:t.circleDataARP[t.arrIdx]});case 10:a=e.sent,200===a.status&&t.showModalInformation(2),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),t.errors.push(e.t0);case 17:if(2!==t.arrType){e.next=60;break}if(t.polygonDataGRM[t.arrIdx]["a"]=t.changeInfo[0][1],t.polygonDataGRM[t.arrIdx]["b"]=t.changeInfo[1][1],t.polygonDataGRM[t.arrIdx]["h"]=t.changeInfo[2][1],t.polygonDataGRM[t.arrIdx]["D"]=t.changeInfo[3][1],t.polygonDataGRM[t.arrIdx]["H"]=t.changeInfo[4][1],t.polygonDataGRM[t.arrIdx]["L"]=t.changeInfo[5][1],null===t.latitude||null===t.longtitude){e.next=38;break}return t.polygonDataGRM[t.arrIdx]["latitude"]=t.latitude,t.polygonDataGRM[t.arrIdx]["longtitude"]=t.longtitude,t.polygonDataGRM[t.arrIdx]["fi"]=t.changeInfo[6][1],e.prev=28,e.next=31,Dt.post("/bra_coords/",{latitude:t.latitude,longtitude:t.longtitude,second_point:t.polyline.latlngs[1],params:t.polygonDataGRM[t.arrIdx]});case 31:o=e.sent,t.polygonDataGRM[t.arrIdx]["coords"]=o.data["coords"],e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](28),t.errors.push(e.t1);case 38:if(t.polygonDataGRM[t.arrIdx]["fi"]===t.changeInfo[6][1]){e.next=50;break}return t.polygonDataGRM[t.arrIdx]["fi"]=t.changeInfo[6][1],e.prev=40,e.next=43,Dt.post("/bra_coords/",{latitude:t.polygonDataGRM[t.arrIdx]["latitude"],longtitude:t.polygonDataGRM[t.arrIdx]["longtitude"],second_point:t.polygonDataGRM[t.arrIdx]["secondPoint"],params:t.polygonDataGRM[t.arrIdx]});case 43:n=e.sent,t.polygonDataGRM[t.arrIdx]["coords"]=n.data["coords"],e.next=50;break;case 47:e.prev=47,e.t2=e["catch"](40),t.errors.push(e.t2);case 50:return e.prev=50,e.next=53,Dt.post("/update_map_object/",{user_login:localStorage.getItem("login"),object_id:t.polygonDataGRM[t.arrIdx]["id"],params:t.polygonDataGRM[t.arrIdx]});case 53:r=e.sent,200===r.status&&t.showModalInformation(2),e.next=60;break;case 57:e.prev=57,e.t3=e["catch"](50),t.errors.push(e.t3);case 60:if(3!==t.arrType){e.next=95;break}if(null===t.latitude||null===t.longtitude){e.next=65;break}return e.next=64,t.calculateIntersection(t.changeInfo[0][1],3);case 64:i=e.sent;case 65:if(null!==t.latitude||null===t.longtitude){e.next=69;break}return e.next=68,t.calculateIntersectionForEdit(t.circleDataDEV[t.arrIdx]["latitude"],t.longtitude,t.changeInfo[0][1],3);case 68:i=e.sent;case 69:if(null===t.latitude||null!==t.longtitude){e.next=73;break}return e.next=72,t.calculateIntersectionForEdit(t.latitude,t.circleDataDEV[t.arrIdx]["longtitude"],t.changeInfo[0][1],3);case 72:i=e.sent;case 73:if(null!==t.latitude||null!==t.longtitude){e.next=77;break}return e.next=76,t.calculateIntersectionForEdit(t.circleDataDEV[t.arrIdx]["latitude"],t.circleDataDEV[t.arrIdx]["longtitude"],t.changeInfo[0][1],3);case 76:i=e.sent;case 77:if(200!==i){e.next=94;break}return t.circleDataDEV[t.arrIdx]["h"]=t.changeInfo[0][1],null!==t.latitude&&null!==t.longtitude&&(t.circleDataDEV[t.arrIdx]["latitude"]=t.latitude,t.circleDataDEV[t.arrIdx]["longtitude"]=t.longtitude),null===t.latitude&&null!==t.longtitude&&(t.circleDataDEV[t.arrIdx]["longtitude"]=t.longtitude),null!==t.latitude&&null===t.longtitude&&(t.circleDataDEV[t.arrIdx]["latitude"]=t.latitude),e.prev=82,e.next=85,Dt.post("/update_map_object/",{user_login:localStorage.getItem("login"),object_id:t.circleDataDEV[t.arrIdx]["id"],params:t.circleDataDEV[t.arrIdx]});case 85:l=e.sent,200===l.status&&t.showModalInformation(2),e.next=92;break;case 89:e.prev=89,e.t4=e["catch"](82),t.errors.push(e.t4);case 92:e.next=95;break;case 94:0===i["height_error"]?(t.modalText="Переместите объект от центра БРА",t.$bvModal.show("modalHeightAlert"),t.changeIntersectionColor(t.circleDataARP,t.polygonDataGRM,i),t.resetEditPanel()):0!==i["height_error"]&&(t.modalText="Переместите объект от центра БРА или уменьшите высоту на ".concat(i["height_error"].toFixed(1)),t.$bvModal.show("modalHeightAlert"),t.changeIntersectionColor(t.circleDataARP,t.polygonDataGRM,i),t.resetEditPanel());case 95:if(4!==t.arrType){e.next=120;break}if(null===t.changeInfo[0][1]){e.next=102;break}return e.next=99,t.calculateIntersectionForEdit(t.tubeDataDev[t.arrIdx]["latitude"],t.tubeDataDev[t.arrIdx]["longtitude"],t.changeInfo[1],3,t.tubeDataDev[t.arrIdx]["polyline"]);case 99:s=e.sent,e.next=105;break;case 102:return e.next=104,t.calculateIntersectionForEdit(t.tubeDataDev[t.arrIdx]["latitude"],t.tubeDataDev[t.arrIdx]["longtitude"],t.tubeDataDev[t.arrIdx]["h"],3,t.tubeDataDev[t.arrIdx]["polyline"]);case 104:s=e.sent;case 105:if(200!==s){e.next=119;break}return t.tubeDataDev[t.arrIdx]["h"]=t.changeInfo[1],e.prev=107,e.next=110,Dt.post("/update_map_object/",{user_login:localStorage.getItem("login"),object_id:t.tubeDataDev[t.arrIdx]["id"],params:t.tubeDataDev[t.arrIdx]});case 110:c=e.sent,200===c.status&&t.showModalInformation(2),e.next=117;break;case 114:e.prev=114,e.t5=e["catch"](107),t.errors.push(e.t5);case 117:e.next=120;break;case 119:0===s["height_error"]?(t.modalText="Переместите объект от центра БРА",t.$bvModal.show("modalHeightAlert"),t.changeIntersectionColor(t.circleDataARP,t.polygonDataGRM,s),t.resetEditPanel()):0!==s["height_error"]&&(t.modalText="Переместите объект от центра БРА или уменьшите высоту на ".concat(s["height_error"].toFixed(1)),t.$bvModal.show("modalHeightAlert"),t.changeIntersectionColor(t.circleDataARP,t.polygonDataGRM,s),t.resetEditPanel());case 120:t.resetEditPanel();case 121:case"end":return e.stop()}}),e,null,[[7,14],[28,35],[40,47],[50,57],[82,89],[107,114]])})))()},resetEditPanel:function(){this.changeInfo=null,this.changePolyline=null,this.arrIdx=null,this.arrType=null,this.latitude=null,this.longtitude=null,this.polyline.latlngs=[],this.polyline.showPolyline=!1},deleteObjectOnMap:function(t,e){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,r,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:n=regeneratorRuntime.mark((function o(n){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e[n]["id"]!==t["id"]||e[n]["userId"]!==Number(a.userId)){o.next=12;break}return o.prev=1,o.next=4,Dt.post("/delete_map_object/",{user_login:a.userName,object_id:e[n]["id"],params:e[n]});case 4:r=o.sent,200===r.status?(e[n]["color"]="#b05457",e[n]["fillColor"]="#e07f82",a.showModalInformation(5),setTimeout(function(){e.splice(n,1)}.bind(a),2e3)):a.showModalInformation(6),o.next=11;break;case 8:o.prev=8,o.t0=o["catch"](1),a.errors.push(o.t0);case 11:return o.abrupt("return","break");case 12:case"end":return o.stop()}}),o,null,[[1,8]])})),r=0;case 2:if(!(r<e.length)){o.next=10;break}return o.delegateYield(n(r),"t0",4);case 4:if(i=o.t0,"break"!==i){o.next=7;break}return o.abrupt("break",10);case 7:r++,o.next=2;break;case 10:case"end":return o.stop()}}),o)})))()},showModalInformation:function(t){1===t&&(this.modalText="Ваш объект успешно добавлен!"),2===t&&(this.modalText="Объект успешно изменён!"),3===t&&(this.modalText="Введите координаты объекта"),4===t&&(this.modalText="Направление сохранено"),5===t&&(this.modalText="Объект удалён!"),6===t&&(this.modalText="Объект не найден!"),this.$bvModal.show("modalInfoOnMap"),setTimeout(function(){this.$bvModal.hide("modalInfoOnMap")}.bind(this),2e3)},changeObjectsPanelVisible:function(){this.openAddPanel=!this.openAddPanel},showDirectionLineOnMap:function(){this.pointCoordinate=!0,this.$bvModal.show("modalInfoDirection")},loadUserObjects:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,o,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt.get("/map_objects/");case 3:if(a=e.sent,200===a.status)for(o=a.data["objects"],console.log(a.data["objects"]),n=0;n<o.length;n++)r=JSON.parse(o[n][5]),r["id"]=o[n][0],1===r["objId"]&&(t.userId!==String(o[n][1])&&(r["color"]="#149AEB",r["fillColor"]="#0217E8"),t.circleDataARP.push(r)),2===r["objId"]&&(t.userId!==String(o[n][1])&&(r["color"]="#149AEB"),t.polygonDataGRM.push(r)),3===r["objId"]&&(t.userId!==String(o[n][1])&&(r["color"]="#149AEB",r["fillColor"]="#0217E8"),t.circleDataDEV.push(r)),4===r["objId"]&&(t.userId!==String(o[n][1])&&(r["color"]="#149AEB",r["fillColor"]="#0217E8"),t.tubeDataDev.push(r));e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),t.errors.push(e.t0),console.log(t.errors);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},created:function(){this.userRole=localStorage.getItem("role"),this.userId=localStorage.getItem("id"),this.userName=localStorage.getItem("login"),this.userRole&&this.loadUserObjects()},beforeMount:function(){},mounted:function(){},updated:function(){}},q=U,z=(a("37bd"),Object(m["a"])(q,M,j,!1,null,"4923a019",null)),K=z.exports,J={name:"Home",components:{LeafletMap:K}},Y=J,Q=(a("8e53"),Object(m["a"])(Y,w,R,!1,null,"b63d6cea",null)),W=Q.exports,X={name:"app",components:{Home:W,Header:C,bus:_t},data:function(){return{componentKey:0}},created:function(){var t=this;_t.$on("updateEvent",(function(e){e&&(t.componentKey+=1)}))}},Z=X,tt=(a("034f"),Object(m["a"])(Z,n,r,!1,null,null,null)),et=tt.exports,at=a("8c4f"),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},nt=[],rt={name:"Sender",methods:{sendData:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:Dt.post(t,e).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));case 1:case"end":return a.stop()}}),a)})))()}}},it=rt,lt=Object(m["a"])(it,ot,nt,!1,null,"066e789b",null),st=lt.exports;o["default"].use(at["a"]);var ct=new at["a"]({mode:"history",routes:[{path:"/",component:W},{path:"/signin",component:b},{path:"/signup",component:x},{path:"/test",component:st},{path:"/registration",component:x},{path:"/login",component:b}]}),ut=a("bc3a"),dt=a.n(ut),pt=a("2106"),mt=a.n(pt),ht=a("5f5b"),bt=a("b1e0"),ft=a("4e2b"),gt=a("0924"),vt=a.n(gt);a("f9e3"),a("2dd8"),a("6cc5");o["default"].use(ht["a"]),o["default"].use(bt["a"]),o["default"].use(mt.a,dt.a),o["default"].component("l-map",O["a"]),o["default"].component("l-tile-layer",G["a"]),o["default"].component("l-marker",ft["a"]),o["default"].component("l-draw-toolbar",vt.a),o["default"].config.productionTip=!1;var Dt=dt.a.create({baseURL:"https://airfieldsystem.herokuapp.com/api/"}),_t=new o["default"];new o["default"]({router:ct,render:function(t){return t(et)}}).$mount("#app")},"5acc":function(t,e,a){},"840a":function(t,e,a){"use strict";a("c526")},"85ec":function(t,e,a){},"8e53":function(t,e,a){"use strict";a("a6d6")},a385:function(t,e,a){"use strict";a("ea2c")},a6d6:function(t,e,a){},c526:function(t,e,a){},d7c0:function(t,e,a){"use strict";a("ebf2")},ea2c:function(t,e,a){},ebf2:function(t,e,a){}});
//# sourceMappingURL=app.54ac57e9.js.map